<div id="pdfContent">
<img src="assets/images/header.jpg" alt="Header Image" style="width: 70%; height: auto;" />
<div class="row">
  <div class="col-md-8 text-left mt-3 mb-3">
    <p>Please email to Travel Agency (Mrs. Rocio Reategui) and Organizing C. at:
    <br><span style="color:blue;">rreategui&#64;actours.com.pe</span> and <span style="color:blue;">oc-peru&#64;fdntp.com</span></p>
  </div>
  <div *ngIf="tableVisible" class="col-md-2 mt-3" style="vertical-align: middle;">
    <button class="btn btn-danger w-100 no-print" (click)="exportPDF()">
      <i class="fa-regular fa-file-pdf"></i> EXPORT
    </button>
  </div>
  <div *ngIf="tableVisible" class="col-md-2 mt-3" style="vertical-align: middle;">
    <button class="btn btn-primary w-100 no-print" (click)="guardar()">
      <i class="fa-solid fa-list"></i> SAVE LIST
    </button>
  </div>
</div>    
<div class="table-responsive">
  <table class="table table-bordered">
    <tr style="background-color: #cecece;">
      <td colspan="2" class="text-left" style="border-right:1px solid #999;color: black; font-weight: 700;">FINAL ROOMING LIST</td>
      <td colspan="2" class="text-left" style="color: black; font-weight: 700;">Please return by	<span style="color: red;background-color:transparent;">13 MAR 2025</span></td>
    </tr>
    <tr>
      <th style="background-color:ghostwhite;">
        <label for="federationName">Federation Name</label>
      </th>
      <td>
        <input
          id="federationName"
          type="text"
          class="form-control border "
          style="background-color:transparent;font-size:0.8rem;"
          [(ngModel)]="federationName"
          (ngModelChange)="updateFederationData()"
        />
      </td>
      <th style="background-color:ghostwhite;">
        <label for="country">Country</label>
      </th>
      <td>
        <input
          id="country"
          type="text"
          class="form-control border "
          style="background-color:transparent;font-size:0.8rem;"
          [(ngModel)]="country"
          (ngModelChange)="updateFederationData()"
        />
      </td>
    </tr>
    <tr>
      <th style="background-color:ghostwhite;">
        <label for="contactPerson">Contact Person</label>
      </th>
      <td>
        <input
          id="contactPerson"
          type="text"
          class="form-control border "
          style="background-color:transparent;font-size:0.8rem;"
          [(ngModel)]="contactPerson"
          (ngModelChange)="updateFederationData()"
        />
      </td>
      <th style="background-color:ghostwhite;">
        <label for="phoneNumber">Phone Number</label>
      </th>
      <td>
        <input
          id="phoneNumber"
          type="text"
          class="form-control border "
          style="background-color:transparent;font-size:0.8rem;"
          [(ngModel)]="phoneNumber"
          (ngModelChange)="updateFederationData()"
        />
      </td>
    </tr>
    <tr>
      <th style="background-color:ghostwhite;">
        <label for="emailAddress">Email Address</label>
      </th>
      <td>
        <input
          id="emailAddress"
          type="email"
          class="form-control border "
          style="background-color:transparent;font-size:0.8rem;"
          [(ngModel)]="emailAddress"
          (ngModelChange)="updateFederationData()"
        />
      </td>
      <th style="background-color:ghostwhite;">
        <label for="mobileNumber">Mobile Number</label>
      </th>
      <td>
        <input
          id="mobileNumber"
          type="text"
          class="form-control border "
          style="background-color:transparent;font-size:0.8rem;"
          [(ngModel)]="mobileNumber"
          (ngModelChange)="updateFederationData()"
        />
      </td>
    </tr>
  </table>
  <table class="table table-bordered">
    <tr style="background-color: #cecece;">
      <td class="text-left" style="border-right:1px solid #999;color: black; font-weight: 700;">HOTEL</td>
    </tr>
    <tr>
      <td>
        <input
          id="hotelName"
          type="text"
          class="form-control border "
          style="background-color:transparent;"
          [(ngModel)]="hotelName"
          (ngModelChange)="updateFederationData()"
          readonly
        />
      </td>
    </tr>
  </table> 

  <!-- BLOQUE SINGLE *ngIf="tableVisible"  -->
  <table class="table table-bordered mb-0">
    <thead>
      <tr style="background-color: #cecece !important;">
        <td colspan="8" class="text-left" style="background-color: #cecece !important;border-right:1px solid #999;color: black; font-weight: 700;">SINGLE</td>
      </tr>
      <tr>
        <th style="width:3%" class="no-print"></th>
        <th style="width:7%">N°</th>
        <th style="width:22%">Family Name</th>
        <th style="width:22%">First Name</th>
        <th style="width:17%">Pass. #</th>
        <th style="width:12%">Day of arrival</th>
        <th style="width:12%">Day of departure</th>
        <th style="width:5%" class="no-print"></th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let row of tableRows; let i = index">
        <td class=" no-print">
          <a href="javascript:void(0)" (click)="removeRow(i)" title="Remove block" style="font-weight:700">
            <i class="fa-regular fa-trash-can text-danger"></i>
          </a>
        </td>
        <td><input [id]="'idSingle' + (i + 1)" type="text" class="form-control border border-0" style="background-color:transparent;" [value]="row.id" readonly/></td>
        <td><input [id]="'familyName' + (i + 1)" type="text" class="form-control border " style="background-color:transparent;font-size:0.8rem;" [(ngModel)]="row.familyName"/></td>
        <td><input [id]="'firstName' + (i + 1)" type="text" class="form-control border " style="background-color:transparent;font-size:0.8rem;" [(ngModel)]="row.firstName"/></td>
        <td><input [id]="'passNumber' + (i + 1)" type="text" class="form-control border " style="background-color:transparent;font-size:0.8rem;" [(ngModel)]="row.passportNumber" (ngModelChange)="passportValidate()"/></td>
        <td><input [id]="'dayArrival' + (i + 1)" type="datetime-local" class="form-control border " style="background-color:transparent;font-size:0.8rem;" [(ngModel)]="row.dayArrival"/></td>
        <td><input [id]="'dayDeparture' + (i + 1)" type="datetime-local" class="form-control border " style="background-color:transparent;font-size:0.8rem;" [(ngModel)]="row.dayDeparture"/></td>
        <td class="no-print">
          <a 
            href="javascript:void(0)" 
            class="text-danger ms-1" 
            style="font-size:1.2rem;" 
            (click)="openFlightModal(row)"
            [attr.disabled]="!isFlightModalEnabled(row) ? true : null"
            [style.pointer-events]="!isFlightModalEnabled(row) ? 'none' : 'auto'">
            <i class="fa-solid fa-plane-circle-check" style="padding-top:10px;"></i>
          </a>                         
        </td>        
        <input type="hidden" [value]="row.tipo_habitacion" />
      </tr>
    </tbody>    
  </table>
  <div
    class="btn bg-info-subtle text-bold text-primary w-100 text-center  no-print"
    (click)="addRow()"
  >
    + ADD <strong>SINGLE</strong>
  </div>

  <!-- BLOQUE DOUBLE/TWIN -->
  <table class="table table-bordered mt-3 mb-0">
    <thead>
      <tr style="background-color: #cecece !important;">
        <td colspan="8" class="text-left" style="background-color: #cecece !important;border-right:1px solid #999;color: black; font-weight: 700;">DOUBLE / TWIN</td>
      </tr>
      <tr>
        <th style="width:3%" class="no-print"></th>
        <th style="width:7%">N°</th>
        <th style="width:22%">Family Name</th>
        <th style="width:22%">First Name</th>
        <th style="width:17%">Pass. #</th>
        <th style="width:12%">Day of arrival</th>
        <th style="width:12%">Day of departure</th>
        <th style="width: 5%" class="no-print"></th>
      </tr>
    </thead>
    <tbody>
      <ng-container *ngFor="let block of tableBlocks; let i = index">
        <!-- Bloque con filas -->
        <tr>
          <td rowspan="2" style="vertical-align: middle;" class="no-print">
            <a href="javascript:void(0)" (click)="removeBlock(i)" title="Remove block" style="font-weight:700">
              <i class="fa-regular fa-trash-can text-danger"></i>
            </a>
          </td>
          <td rowspan="2" style="vertical-align: middle;">
            <input [id]="'idSingle' + (i + 1)" type="text" class="form-control border border-0" style="background-color:transparent;font-size:0.8rem;" [value]="block.id" readonly />
          </td>
          <td><input [id]="'familyName' + (i + 1)" type="text" class="form-control border" style="background-color:transparent;font-size:0.8rem;" [(ngModel)]="block.familyName" /></td>
          <td><input [id]="'firstName' + (i + 1)" type="text" class="form-control border" style="background-color:transparent;font-size:0.8rem;" [(ngModel)]="block.firstName" /></td>
          <td><input [id]="'passNumber' + (i + 1)" type="text" class="form-control border" style="background-color:transparent;font-size:0.8rem;" [(ngModel)]="block.passportNumber" (ngModelChange)="passportValidate()"/></td>
          <td><input [id]="'dayArrival' + (i + 1)" type="datetime-local" class="form-control border" style="background-color:transparent;font-size:0.8rem;" [(ngModel)]="block.dayArrival" (ngModelChange)="syncArrivalDate(i, $event)" /></td>
          <td><input [id]="'dayDeparture' + (i + 1)" type="datetime-local" class="form-control border" style="background-color:transparent;font-size:0.8rem;" [(ngModel)]="block.dayDeparture" (ngModelChange)="syncDepartureDate(i, $event)" /></td>          
          <td class="no-print">
            <a 
              href="javascript:void(0)" 
              class="text-danger ms-1" 
              style="font-size:1.2rem;" 
              (click)="openFlightModalDouble(block.id, i, 1)"
              [attr.disabled]="!isFlightModalDoubleEnabled(block) ? true : null"
              [style.pointer-events]="!isFlightModalDoubleEnabled(block) ? 'none' : 'auto'">
              <i class="fa-solid fa-plane-circle-check"></i>
            </a>
          </td>
        </tr>
        <tr>
          <td><input [id]="'familyName2' + (i + 1)" type="text" class="form-control border" style="background-color:transparent;font-size:0.8rem;" [(ngModel)]="block.familyName2" /></td>
          <td><input [id]="'firstName2' + (i + 1)" type="text" class="form-control border" style="background-color:transparent;font-size:0.8rem;" [(ngModel)]="block.firstName2" /></td>
          <td><input [id]="'passNumber2' + (i + 1)" type="text" class="form-control border" style="background-color:transparent;font-size:0.8rem;" [(ngModel)]="block.passportNumber2" (ngModelChange)="passportValidate()"/></td>
          <td><input [id]="'dayArrival2' + (i + 1)" type="datetime-local" class="form-control border" style="background-color:transparent;font-size:0.8rem;" [(ngModel)]="block.dayArrival2" /></td>
          <td><input [id]="'dayDeparture2' + (i + 1)" type="datetime-local" class="form-control border" style="background-color:transparent;font-size:0.8rem;" [(ngModel)]="block.dayDeparture2" /></td>
          <td class="no-print">
            <a 
              href="javascript:void(0)" 
              class="text-danger ms-1" 
              style="font-size:1.2rem;" 
              (click)="openFlightModalDouble(block.id, i, 2)"
              [attr.disabled]="!isFlightModalDoubleEnabled(block) ? true : null"
              [style.pointer-events]="!isFlightModalDoubleEnabled(block) ? 'none' : 'auto'">
              <i class="fa-solid fa-plane-circle-check"></i>
            </a>
          </td>
        </tr>
      </ng-container>
    </tbody>
  </table>
  
  <!-- Botón para agregar nuevos bloques -->
  <div class="btn bg-info-subtle text-bold text-primary w-100 text-center no-print" (click)="addBlock()">
    + ADD <strong>DOUBLE/TWIN</strong> BLOCK
  </div>
  
  <table class="table table-bordered mt-3 mb-0">
    <thead>
      <tr style="background-color: #cecece !important;">
        <td colspan="8" class="text-left" style="background-color: #cecece !important;border-right:1px solid #999;color: black; font-weight: 700;">TRIPLE</td>
      </tr>
      <tr>
        <th style="width:3%" class="no-print"></th>
        <th style="width:7%">N°</th>
        <th style="width:22%">Family Name</th>
        <th style="width:22%">First Name</th>
        <th style="width:17%">Passport #</th>
        <th style="width:12%">Day of arrival</th>
        <th style="width:12%">Day of departure</th>
        <th style="width:5%" class="no-print"></th>
      </tr>
    </thead>
    <tbody>
      <!-- Recorrer los bloques de filas -->
      <ng-container *ngFor="let tripleBlock of tableTripleRows; let i = index">
        <tr>
          <td rowspan="3" style="vertical-align: middle;" class="no-print">
            <a href="javascript:void(0)" (click)="removeTripleBlock(i)" title="Remove block" style="font-weight:700">
              <i class="fa-regular fa-trash-can text-danger"></i>
            </a>            
          </td>
          <td rowspan="3" style="vertical-align: middle;border-bottom:0px !important;"><input [id]="'idTriple' + (i + 1)" type="text" class="form-control border " style="background-color:transparent;" [value]="tripleBlock.id"  readonly> </td>
          <td><input [id]="'familyName' + (i + 1)" type="text" class="form-control border " style="background-color:transparent;font-size:0.8rem;" [(ngModel)]="tripleBlock.familyName" /></td>
          <td><input [id]="'firstName' + (i + 1)" type="text" class="form-control border "style="background-color:transparent;font-size:0.8rem;" [(ngModel)]="tripleBlock.firstName" /></td>
          <td><input [id]="'passNumber' + (i + 1)" type="text" class="form-control border " style="background-color:transparent;font-size:0.8rem;"[(ngModel)]="tripleBlock.passportNumber" (ngModelChange)="passportValidate()"/></td>
          <td><input [id]="'dayArrival' + (i + 1)" type="datetime-local" class="form-control border " style="background-color:transparent;font-size:0.8rem;" [(ngModel)]="tripleBlock.dayArrival" (ngModelChange)="syncArrivalDateTriple(i, $event)" /></td>
          <td><input [id]="'dayDeparture' + (i + 1)" type="datetime-local" class="form-control border " style="background-color:transparent;font-size:0.8rem;"  [(ngModel)]="tripleBlock.dayDeparture" (ngModelChange)="syncDepartureDateTriple(i, $event)" /></td>
          <td class="no-print">
            <a 
              href="javascript:void(0)" 
              class="text-danger ms-1" 
              style="font-size:1.2rem;" 
              (click)="openFlightModalTriple(tripleBlock.id, i, 1)"
              [attr.disabled]="!isFlightModalTripleEnabled(tripleBlock) ? true : null"
              [style.pointer-events]="!isFlightModalTripleEnabled(tripleBlock) ? 'none' : 'auto'">
              <i class="fa-solid fa-plane-circle-check"></i>
            </a>         
          </td> 
        </tr>
        <tr>
          <td><input [id]="'familyName2' + (i + 1)" type="text" class="form-control border " style="background-color:transparent;font-size:0.8rem;" [(ngModel)]="tripleBlock.familyName2" /></td>
          <td><input [id]="'firstName2' + (i + 1)" type="text" class="form-control border " style="background-color:transparent;font-size:0.8rem;" [(ngModel)]="tripleBlock.firstName2" /></td>
          <td><input [id]="'passNumber2' + (i + 1)" type="text" class="form-control border " style="background-color:transparent;font-size:0.8rem;" [(ngModel)]="tripleBlock.passportNumber2" (ngModelChange)="passportValidate()"/></td>
          <td><input [id]="'dayArrival2' + (i + 1)" type="datetime-local" class="form-control border " style="background-color:transparent;font-size:0.8rem;" [(ngModel)]="tripleBlock.dayArrival2" (ngModelChange)="syncArrivalDateTriple(i, $event)" /></td>
          <td><input [id]="'dayDeparture2' + (i + 1)" type="datetime-local" class="form-control border " style="background-color:transparent;font-size:0.8rem;" [(ngModel)]="tripleBlock.dayDeparture2" (ngModelChange)="syncDepartureDateTriple(i, $event)" /></td>
          <td class="no-print">
            <a 
              href="javascript:void(0)" 
              class="text-danger ms-1" 
              style="font-size:1.2rem;" 
              (click)="openFlightModalTriple(tripleBlock.id, i, 2)"
              [attr.disabled]="!isFlightModalTripleEnabled(tripleBlock) ? true : null"
              [style.pointer-events]="!isFlightModalTripleEnabled(tripleBlock) ? 'none' : 'auto'">
              <i class="fa-solid fa-plane-circle-check"></i>
            </a>          
          </td> 
        </tr>
        <tr>
          <td><input [id]="'familyName3' + (i + 1)" type="text" class="form-control border " style="background-color:transparent;font-size:0.8rem;" [(ngModel)]="tripleBlock.familyName3" /></td>
          <td><input [id]="'firstName3' + (i + 1)" type="text" class="form-control border " style="background-color:transparent;font-size:0.8rem;" [(ngModel)]="tripleBlock.firstName3" /></td>
          <td><input [id]="'passNumber3' + (i + 1)" type="text" class="form-control border " style="background-color:transparent;font-size:0.8rem;"  [(ngModel)]="tripleBlock.passportNumber3" (ngModelChange)="passportValidate()"/></td>
          <td><input [id]="'dayArrival3' + (i + 1)" type="datetime-local" class="form-control border " style="background-color:transparent;font-size:0.8rem;" [(ngModel)]="tripleBlock.dayArrival3" (ngModelChange)="syncArrivalDateTriple(i, $event)" /></td>
          <td><input [id]="'dayDeparture3' + (i + 1)" type="datetime-local" class="form-control border " style="background-color:transparent;font-size:0.8rem;" [(ngModel)]="tripleBlock.dayDeparture3" (ngModelChange)="syncDepartureDateTriple(i, $event)" /></td>
          <td class="no-print">
            <a 
              href="javascript:void(0)" 
              class="text-danger ms-1" 
              style="font-size:1.2rem;" 
              (click)="openFlightModalTriple(tripleBlock.id, i, 3)"
              [attr.disabled]="!isFlightModalTripleEnabled(tripleBlock) ? true : null"
              [style.pointer-events]="!isFlightModalTripleEnabled(tripleBlock) ? 'none' : 'auto'">
              <i class="fa-solid fa-plane-circle-check"></i>
            </a>         
          </td> 
        </tr>
      </ng-container>
    </tbody>
  </table>
  <!-- Botón para agregar nuevos bloques -->
  <div class="btn bg-info-subtle text-bold text-primary w-100 text-center no-print" (click)="addTripleBlock()">
    + ADD <strong>TRIPLE</strong> BLOCK
  </div>
</div>

<table class="table table-bordered mt-3 mb-0">
    <tr>
      <th>
        <p>Note: </p>
        <p class="text-danger">Important advice: We recommend to send this rooming list as soon as possible in order to have all arrangements settled with the hotel ahead of time!</p>
      </th>
    </tr>
</table>

<table class="table table-bordered mt-3 mb-0">
  <tr style="background-color: #cecece !important;">
    <td class="text-left" style="background-color: #cecece !important;border-right:1px solid #999;color: black; font-weight: 700;">
      Organizing Committee
    </td>
  </tr>
  <tr>
    <td>
      Mr. Fabio Leon RAVINEZ / Ms. Antonella ZEVALLOS<br>
      Mobile: +51-937-678658 / +51-986-638201<br>
      E-mail:  <a href="mailto:oc-peru@fdntp.com" class="text-primary">oc-peru&#64;fdntp.com</a> / <a href="mailto:atas@fdntp.com" class="text-primary">ata&#64;fdntp.com</a> / <a href="mailto:secre@dntp.com" class="text-primary">secre&#64;dntp.com</a>
    </td>
  </tr>
</table>
</div>